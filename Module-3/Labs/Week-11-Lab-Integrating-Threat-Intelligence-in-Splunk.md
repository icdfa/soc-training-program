# Week 11 Lab: Integrating Threat Intelligence in Splunk

## Learning Outcomes

By the end of this lab, you will be able to:

- Ingest external threat intelligence data into Splunk as a lookup file.
- Use the `lookup` command to correlate log data with a threat intelligence feed.
- Create a correlation search to detect connections to known malicious IP addresses.
- Configure alerts based on threat intelligence matches.

## Objective

To practice integrating threat intelligence into Splunk and using it to detect malicious activity.

## Scenario

You are a SOC analyst and you have been tasked with integrating a threat intelligence feed into Splunk to detect connections to known malicious IP addresses.

## Instructions

### Part 1: Download a Threat Intelligence Feed

1. Go to the Abuse.ch website (https://feodotracker.abuse.ch/) and download the list of Feodo Tracker Botnet C2 IP addresses.
2. Save the list as a CSV file named `feodo_tracker.csv`.

### Part 2: Create a Lookup File in Splunk

1. In Splunk, go to **Settings > Lookups > Lookup table files**.
2. Click **New** and upload the `feodo_tracker.csv` file.
3. Name the lookup file `feodo_tracker`.

### Part 3: Create a Correlation Search

1. Write a Splunk search that uses the `lookup` command to compare your firewall logs to the `feodo_tracker` lookup file.
2. The search should identify any connections from your internal network to any of the IP addresses in the lookup file.
3. Save the search as a correlation search named "Connection to Known Malicious IP Detected".
4. Configure the search to run every 5 minutes and create an alert when the number of results is greater than 0.

## Deliverables

- A screenshot of your correlation search.
- A screenshot of an alert generated by your correlation search (you may need to manually add a log entry to your firewall logs to trigger the alert).
